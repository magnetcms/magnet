---
title: Auth Module
description: Extensible authentication system with JWT and custom strategies
---

# Auth Module

The Auth module provides an extensible authentication system for the admin interface and API. By default, it uses JWT-based authentication, but you can implement custom strategies for other providers like Supabase, Auth0, or your own authentication system.

## Quick Start

By default, Magnet uses JWT authentication. No additional configuration is needed:

```ts
MagnetModule.forRoot({
  db: { uri: 'mongodb://localhost:27017/myapp' },
  jwt: { secret: process.env.JWT_SECRET },
  // auth config is optional - defaults to JWT strategy
})
```

## Auth Service

```ts
import { Injectable } from '@nestjs/common'
import { AuthService } from '@magnet/core'

@Injectable()
export class MyService {
  constructor(private authService: AuthService) {}

  async login(email: string, password: string) {
    return this.authService.login({ email, password })
  }

  async register(email: string, password: string, name: string) {
    return this.authService.register({ email, password, name })
  }
}
```

## API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/auth/register` | Register a new user |
| POST | `/auth/login` | Login and get access token |
| GET | `/auth/me` | Get current user info (requires auth) |
| GET | `/auth/status` | Check authentication status |
| PUT | `/auth/account/profile` | Update user profile (requires auth) |
| PUT | `/auth/account/password` | Change password (requires auth) |

## Guards

### JwtAuthGuard

Protects routes requiring authentication:

```ts
import { Controller, Get, UseGuards } from '@nestjs/common'
import { JwtAuthGuard } from '@magnet/core'

@Controller('protected')
@UseGuards(JwtAuthGuard)
export class ProtectedController {
  @Get()
  getProtectedData() {
    return { message: 'This is protected' }
  }
}
```

## Configuration

### Default JWT Strategy

```ts
MagnetModule.forRoot({
  db: { uri: 'mongodb://localhost:27017/myapp' },
  jwt: { secret: process.env.JWT_SECRET },
  auth: {
    strategy: 'jwt', // default
    jwt: {
      secret: process.env.JWT_SECRET, // optional, falls back to jwt.secret
      expiresIn: '7d', // optional, defaults to '7d'
    },
  },
})
```

### Auth Config Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `strategy` | string | `'jwt'` | Authentication strategy name |
| `jwt.secret` | string | - | JWT signing secret (falls back to `jwt.secret`) |
| `jwt.expiresIn` | string | `'7d'` | Token expiration time |

## Custom Strategies

Magnet supports custom authentication strategies for integrating with external providers. See the [Custom Auth Strategies](/docs/en/core/auth/custom-strategies) guide for details.

<Callout type="warn">
Always set `JWT_SECRET` via environment variables in production. Never commit secrets to version control.
</Callout>
